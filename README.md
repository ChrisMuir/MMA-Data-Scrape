UFC/MMA Scrape README File
========

Objective
---------

The purpose of this project is to scrape historical MMA data on fights and fighters, 
clean the data, and create new feature variables to make it as useful as possible. 
Project was written in R, using package rvest for scraping.

Files
-----

1. `0-wiki_ufcbouts.R` scrapes the results of every UFC fight from Wikipedia (or updates an existing fight DB).
2. `1-wiki_ufcfighters.R` scrapes the details of every fighter that has ever fought 
in the UFC and has a Wikipedia page. Fighter details include: age, height, reach, wins/losses, nationality, team/camp association, etc.
3. `wiki_ufcbouts_functions.R` houses all custom functions used in ufcbouts scrape file.
4. `wiki_ufcfighters_functions.R` houses all custom functions used in ufcfighters scrape file.

Instructions
------------

Save folder `mma_scrape` to your current working directory. There are two scrape files 
(`0-wiki_ufcbouts.R` and `1-wiki_ufcfighters.R`), file `0` must be run prior to running 
file `1`. The two function files provide functions used for scraping and are 
sourced at the top of each of the scrape files. The output of each scrape file is 
a dataframe saved as an .RData file to the folder `mma_scrape`. If the ufcbouts scrape 
file has been run in the past and the output .RData file exists in the directory `mma_scrape`, 
then running ufcbouts again will ONLY scrape new fight records that have been added to 
Wikipedia since the last time the script was run, appends the new records to the 
boutsdf dataframe and saves it back to the same .RData file.

Notes
-----

The majority of the code is performing text clean up, text extraction, tidying 
variables and creating new feature variables. I'm planning on add more to this in the near future
(scraping historical judging data for all MMA fights, merging of datasets).

List of Variables Within the Output DF From Each Scrape File
-------------

Bout Results File `0-wiki_ufcbouts.R`:

```r
str(boutsdf)
```

```
> str(boutsdf)
'data.frame':	3900 obs. of  27 variables:
 $ Weight      : chr  "Middleweight" "Middleweight" "Light Heavyweight" "Heavyweight" ...
 $ FighterA    : chr  "Michael Bisping" "Gegard Mousasi" "Jimi Manuwa" "Stefan Struve" ...
 $ VS          : chr  "def." "def." "def." "def." ...
 $ FighterB    : chr  "Dan Henderson" "Vitor Belfort" "Ovince Saint Preux" "Daniel Omielanczuk" ...
 $ Result      : chr  "Decision" "TKO" "KO" "Submission" ...
 $ Subresult   : chr  "unanimous" "punches" "punches" "d'arce choke" ...
 $ Round       : num  5 2 2 2 1 1 3 3 2 3 ...
 $ Time        : chr  "5:00" "2:43" "2:38" "1:41" ...
 $ TotalSeconds: num  1500 463 458 401 262 119 836 781 580 880 ...
 $ Event       : chr  "UFC 204: Bisping vs Henderson 2" "UFC 204: Bisping vs Henderson 2" "UFC 204: Bisping vs Henderson 2" "UFC 204: Bisping vs Henderson 2" ...
 $ Date        : Date, format: "2016-10-08" "2016-10-08" "2016-10-08" "2016-10-08" ...
 $ Venue       : chr  "Manchester Arena" "Manchester Arena" "Manchester Arena" "Manchester Arena" ...
 $ City        : chr  "Manchester" "Manchester" "Manchester" "Manchester" ...
 $ State       : chr  NA NA NA NA ...
 $ Country     : chr  "England" "England" "England" "England" ...
 $ Belt        : chr  "Michael Bisping, Middleweight, Champion" NA NA NA ...
 $ wikilink    : chr  "https://en.wikipedia.org/wiki/UFC_204" "https://en.wikipedia.org/wiki/UFC_204" "https://en.wikipedia.org/wiki/UFC_204" "https://en.wikipedia.org/wiki/UFC_204" ...
 $ over1.5r    : num  1 1 1 0 0 0 1 1 1 1 ...
 $ over2.5r    : num  1 0 0 0 0 0 1 1 0 1 ...
 $ over3.5r    : num  1 0 0 0 0 0 0 0 0 0 ...
 $ over4.5r    : num  1 0 0 0 0 0 0 0 0 0 ...
 $ ITD         : num  0 1 1 1 1 1 1 1 1 1 ...
 $ r1Finish    : num  0 0 0 0 1 1 0 0 0 0 ...
 $ r2Finish    : num  0 1 1 1 0 0 0 0 1 0 ...
 $ r3Finish    : num  0 0 0 0 0 0 1 1 0 1 ...
 $ r4Finish    : num  0 0 0 0 0 0 0 0 0 0 ...
 $ r5Finish    : num  0 0 0 0 0 0 0 0 0 0 ...
```

Fighter Details File `1-wiki_ufcfighters.R`:

```r
str(fighters)
```

```
> str(fighters)
Classes 'tbl_df', 'tbl' and 'data.frame':	1227 obs. of  45 variables:
 $ Name                      : chr  "Michael Bisping" "Dan Henderson" "Gegard Mousasi" "Vitor Belfort" ...
 $ Current Division          : chr  "Middleweight" "Middleweight" "Middleweight" "Middleweight" ...
 $ Total Fights              : num  37 47 48 38 18 28 36 27 11 21 ...
 $ Total Wins                : num  30 32 40 25 16 19 28 19 11 14 ...
 $ Wins By knockout          : num  16 16 21 18 14 9 8 3 5 6 ...
 $ Wins By submission        : num  4 2 12 3 1 5 17 9 3 5 ...
 $ Wins By decision          : num  10 14 7 4 1 5 2 7 3 3 ...
 $ Wins By disqualification  : num  0 0 0 0 0 0 1 0 0 0 ...
 $ Wins Unknown              : num  0 0 0 0 0 0 0 0 0 0 ...
 $ Total Losses              : num  7 15 6 13 2 9 8 6 0 7 ...
 $ Losses By knockout        : num  2 3 1 6 2 2 6 0 0 0 ...
 $ Losses By submission      : num  1 4 3 2 0 1 1 1 0 4 ...
 $ Losses By decision        : num  4 8 2 5 0 6 1 5 0 3 ...
 $ Losses By disqualification: num  0 0 0 0 0 0 0 0 0 0 ...
 $ Losses Unknown            : num  0 0 0 0 0 0 0 0 0 0 ...
 $ No Contest                : num  0 0 0 0 0 0 0 1 0 0 ...
 $ Draw                      : num  0 0 2 0 0 0 0 1 0 0 ...
 $ Born                      : chr  "1979-02-28" "1970-08-24" "1985-08-01" "1977-04-01" ...
 $ Height in Inches          : num  73 71 74 72 73 75 84 72 68 67 ...
 $ Reach in Inches           : num  75.5 74 76 74 79 80 84.5 74 70 70 ...
 $ Team                      : chr  "Reign Training Center, HB Ultimate Training Center, RVCA Training Center" "Team Quest (1999 - present) Dan Henderson Fitness Center" "Sportschool JurojinRed Devil International" "Fortfit Gym" ...
 $ Trainer                   : chr  NA NA NA NA ...
 $ Weight in Pounds          : num  185 184 185 184 205 205 265 238 145 135 ...
 $ Division                  : chr  "Middleweight (2008-present)Light heavyweight (2004-2007)" "LightweightWelterweightMiddleweightLight heavyweightHeavyweight" "Light Heavyweight (2009-2013)Middleweight (2003-2008, 2014-present)" "Middleweight (2008-present)Light Heavyweight (1998-2007, 2012, 2013)Heavyweight (1996-1997, 2001)" ...
 $ Other names               : chr  "The Count" "Hendo, Hollywood, Dangerous" "The Dreamcatcher" "The Phenom" ...
 $ Rank                      : chr  "Brown belt in Brazilian jiu-jitsu under Brady Fink" NA "Black belt in Judo" "Black belt in Brazilian Jiu-Jitsu" ...
 $ wikilink                  : chr  "https://en.wikipedia.org/wiki/Michael_Bisping" "https://en.wikipedia.org/wiki/Dan_Henderson" "https://en.wikipedia.org/wiki/Gegard_Mousasi" "https://en.wikipedia.org/wiki/Vitor_Belfort" ...
 $ Years active              : chr  "2004-present" "1997 - 2016 (MMA)" "2003-present" "1996-present (MMA)" ...
 $ Fighting out of           : chr  "Manchester, England" "Temecula, California" "Leiden, Netherlands" "Rio de Janeiro, Brazil" ...
 $ Notable relatives         : chr  NA NA "Gewik Mousasi (brother)" NA ...
 $ Residence                 : chr  NA NA NA "Boca Raton, Florida, United States" ...
 $ Style                     : chr  "Karate, wrestling, BJJ, Jujutsu" "Greco Roman Wrestling, Freestyle Wrestling, Brazilian Jiu Jitsu, Vale Tudo" "Kickboxing, Judo" "Boxing, Kickboxing, Muay Thai, Brazilian Jiu Jitsu" ...
 $ Nationality               : chr  "British" "American" "Dutch" "Brazilian" ...
 $ Notable school(s)         : chr  NA "Victor Valley High School" NA NA ...
 $ Stance                    : chr  NA NA NA NA ...
 $ University                : chr  NA "Cal State FullertonArizona State University" NA NA ...
 $ Wrestling                 : chr  NA "Olympian Greco-Roman Wrestling" NA NA ...
 $ Website                   : chr  "http://www.bisping.tv/" "http://www.danhenderson.com/" NA NA ...
 $ Teacher(s)                : chr  NA NA "Chris Dolman, Joop Kruis" NA ...
 $ Ethnicity                 : chr  NA NA NA NA ...
 $ Notable students          : chr  NA NA NA "Cezar Ferreira" ...
 $ Children                  : chr  NA "3" NA NA ...
 $ Spouse                    : chr  NA NA NA "Joana Prado" ...
 $ Occupation                : chr  NA NA NA NA ...
 $ Died                      : chr  NA NA NA NA ...
```